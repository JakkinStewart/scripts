#!/bin/sh
REPOSITORY=ssh://nopriv@192.168.1.138:45/home/nopriv/Storage/Backup/V/vSager.borg
# Backup all of /home and /var/www except a few
# excluded directories
borg create -C lzma,9 -v --stats --chunker-params 19,23,21,4095       \
    $REPOSITORY::v-`date +%Y-%m-%d`     \
    /home/v 		                    \
    --exclude /home/v/steam        		\
    --exclude /home/v/.local    		\
    --exclude /home/v/vmware			\
    --exclude /home/v/.armory/ 			\
    --exclude /home/v/.attic/ 			\
    --exclude /home/v/.bitcoin/ 		\
    --exclude /home/v/.bundle/ 			\
    --exclude /home/v/.ccache/ 			\
    --exclude /home/v/.gem/ 			\
    --exclude /home/v/.local/ 			\
    --exclude /home/v/.mozilla/ 		\
    --exclude /home/v/.pki/ 			\
    --exclude /home/v/.sgminer/ 		\
    --exclude /home/v/.thumbnails/ 		\
    --exclude /home/v/.vnc/ 			\
    --exclude /home/v/.wicd/ 			\
    --exclude /home/v/.zcompcache

# Use the `prune` subcommand to maintain 7 daily, 4 weekly
# and 6 monthly archives.
borg prune -v $REPOSITORY --keep-daily=7 --keep-weekly=4 --keep-monthly=6
